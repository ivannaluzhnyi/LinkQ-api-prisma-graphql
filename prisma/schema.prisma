generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model account {
  id          Int           @id
  is_active   Boolean
  email       String        @unique
  roles       Json
  password    String
  firstname   String?
  lastname    String?
  birthdate   DateTime?
  created     DateTime
  updated     DateTime
  salary      Float?
  application application[]
  guarantor   guarantor[]
  property    property[]
}

model address {
  id       Int       @id
  street   String
  zipcode  String
  city     String
  country  String
  floor    Int?
  room     Int?
  property property?
}

model application {
  id          Int       @id
  buyer_id    Int
  property_id Int
  offer       Float
  created     DateTime
  updated     DateTime
  account     account   @relation(fields: [buyer_id], references: [id])
  property    property  @relation(fields: [property_id], references: [id])
  contract    contract?

  @@index([property_id], name: "idx_a45bddc1549213ec")
  @@index([buyer_id], name: "idx_a45bddc16c755722")
}

model candidature {
  id                   Int                    @id
  first_name           String
  last_name            String
  motivation           String
  guarantor            String?
  revenue              Int
  candidature_property candidature_property[]
}

model candidature_property {
  candidature_id Int
  property_id    Int
  candidature    candidature @relation(fields: [candidature_id], references: [id])
  property       property    @relation(fields: [property_id], references: [id])

  @@id([candidature_id, property_id])
  @@index([property_id], name: "idx_e4a8d240549213ec")
  @@index([candidature_id], name: "idx_e4a8d240b6121583")
}

model contract {
  id             Int         @id
  application_id Int         @unique
  price          Float
  created        DateTime
  updated        DateTime
  application    application @relation(fields: [application_id], references: [id])
}

model doctrine_migration_versions {
  version        String    @id
  executed_at    DateTime?
  execution_time Int?
}

model feature {
  id        Int       @id
  size      Int
  rooms     Int
  bedrooms  Int
  bathrooms Int
  garages   Int
  property  property?
}

model greeting {
  id   Int    @id
  name String
}

model guarantor {
  id              Int     @id
  user_related_id Int
  first_name      String
  last_name       String
  relation        String
  salary          Float
  account         account @relation(fields: [user_related_id], references: [id])

  @@index([user_related_id], name: "idx_21adf595e60506ed")
}

model media {
  id          Int       @id
  property_id Int?
  filename    String
  extension   String
  uri         String
  created     DateTime
  updated     DateTime
  property    property? @relation(fields: [property_id], references: [id])

  @@index([property_id], name: "idx_6a2ca10c549213ec")
}

model property {
  id                   Int                    @id
  address_id           Int                    @unique
  features_id          Int                    @unique
  title                String
  description          String
  user_related_id      Int?
  address              address                @relation(fields: [address_id], references: [id])
  feature              feature                @relation(fields: [features_id], references: [id])
  account              account?               @relation(fields: [user_related_id], references: [id])
  application          application[]
  candidature_property candidature_property[]
  media                media[]

  @@index([user_related_id], name: "idx_8bf21cdee60506ed")
}
